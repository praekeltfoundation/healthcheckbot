intents:
  - greet
  - request_healthcheck
  - affirm
  - deny
  - thankyou
  - chitchat
  - stop
  - bot_challenge
  - menu

actions:
  - utter_menu
  - action_get_user
  - action_reset_all_but_few_slots
  - utter_accept_tc_new
  - utter_accept_tc_returning
  - utter_ask_province
  - utter_ask_age
  - utter_ask_gender
  - utter_ask_location
  - utter_ask_obesity
  - utter_ask_diabetes
  - utter_ask_hypertension
  - utter_ask_cardiovascular
  - utter_ask_pre_existing
  - utter_ask_sore_throat
  - utter_ask_fever
  - utter_ask_breathlessness
  - utter_ask_cough
  - utter_ask_smell
  - utter_ask_exposure
  - utter_ask_tracing
  - utter_submit
  - utter_slots_values
  - utter_noworries
  - utter_chitchat
  - utter_ask_continue
  - utter_default
  - utter_iamabot
  - utter_ask_like_most
  - utter_ask_improve_service
  - utter_goodbye
  - utter_greet
  - utter_submit_user
  - utter_more_info

slots:
  smell:
    type: unfeaturized
    auto_fill: false
  breathlessness:
    type: unfeaturized
    auto_fill: false
  sore_throat:
    type: unfeaturized
    auto_fill: false
  fever:
    type: unfeaturized
    auto_fill: false
  pre_existing:
    type: unfeaturized
    auto_fill: false
  cardiovascular:
    type: unfeaturized
    auto_fill: false
  hypertension:
    type: unfeaturized
    auto_fill: false
  diabetes:
    type: unfeaturized
    auto_fill: false
  obesity:
    type: unfeaturized
    auto_fill: false
  location:
    type: unfeaturized
    auto_fill: false
  gender:
    type: unfeaturized
    auto_fill: false
  province:
    type: unfeaturized
    auto_fill: false
  age:
    type: unfeaturized
    auto_fill: false
  cough:
    type: unfeaturized
    auto_fill: false
  exposure:
    type: unfeaturized
    auto_fill: false
  tracing:
    type: unfeaturized
    auto_fill: false
  requested_slot:
    type: unfeaturized
  terms_cond:
    type: categorical
    values:
      - ACCEPT
      - MORE
      - OTHER
  user_status:
    type: categorical
    values:
      - returning
      - new

forms:
  - healthcheck_form
  - userdata_form
  - terms_form

responses:

  utter_accept_tc_returning:
    - buttons:
      - payload: "ACCEPT"
        title: "accept"
      - payload: "MORE"
        title: "more"
      - payload: "OTHER"
        title: "other"

      text: "Welcome back to *HealthCheck*, your weekly risk assessment tool. Thank you for coming forward and for contributing to the health of all citizens AND stopping the spread of the virus ü¶†

             Reply with one of the words in BOLD to continue

             ACCEPT ‚úÖ - _to accept the terms and conditions and begin your HealthCheck_
             OTHER üë• - _If you are doing this HealthCheck for someone other than yourself (Example: A Child)_
             MORE üìÑ - _to read the terms and conditions_

             (or Reply MENU üìå _to return to the main menu_)"

  utter_menu:
    - text: "MENU"

  utter_more_info:
    - text: "You confirm that you are responsible for your medical care & treatment. This service only provides info.
             This service is not a substitute for professional medical advice/diagnosis/treatment. Get a qualified health provider's advice about your medical condition/care
             You confirm that you shouldn't disregard/delay seeking medical advice about treatment/care because of this service. Rely on info at your own risk."

  utter_submit_user:
    - text: "Thank you for providing your personal information.
             We will not ask you those details again.
             Let's see how you are feeling today:"

  utter_ask_fever:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Do you feel very hot or cold? Are you sweating or shivering? When you touch your forehead, does it feel hot?"

  utter_ask_obesity:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Has a doctor or other health professional diagnosed you with Obesity?"

  utter_ask_diabetes:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Has a doctor or other health professional diagnosed you with Diabetes?"

  utter_ask_smell:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Have you noticed any recent changes in your ability to taste or smell things?"

  utter_ask_hypertension:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Has a doctor or other health professional diagnosed you with Hypertension?"

  utter_ask_cardiovascular:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Has a doctor or other health professional diagnosed you with Cardiovascular Disease?"

  utter_ask_breathlessness:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
      text: "Do you have breathlessness or a difficulty breathing, that you've noticed recently?"

  utter_ask_pre_existing:
    - buttons:
        - payload: "YES"
          title: "yes"
        - payload: "NO"
          title: "no"
        - payload: "NOT SURE"
          title: "not_sure"
      text: "Do you have a pre-existing medical condition we should be aware of?"

  utter_ask_location:
    - text: "We need to collect your location.

             Please share your location üìç using WhatsApp by following these steps:
             - Tap the attach icon (+ or  üìé) on the bottom of WhatsApp.
             - Select location
             - This will bring up a map with a pin showing your current location. Tap Send Your Current Location if this is your address.
             - You can also choose from various other nearby locations if you think that the GPS is a bit off.

             Or TYPE the name of your Suburb, Township, Town or Village (or nearest)?"

  utter_ask_gender:
    - buttons:
        - payload: "MALE"
          title: "male"
        - payload: "FEMALE"
          title: "female"
        - payload: "OTHER"
          title: "other"
        - payload: "RATHER NOT SAY"
          title: "rather_not_say"

      text: "Please provide us with the gender you identify as:"

  utter_accept_tc_new:
    - buttons:
        - payload: "ACCEPT"
          title: "accept"
        - payload: "MORE"
          title: "more"

      text: "HealthCheck is your weekly risk assessment tool. Please help us by answering a few questions about you and your health. You will receive advice on what actions to take based on national guidelines and the data you enter will help us in predictive modelling and planning our national response to COVID-19. Thank you for coming forward and for contributing to the health of all citizens AND stopping the spread of the virus ü¶†

             Reply with one of the words in BOLD to continue

             ACCEPT ‚úÖ - _to accept the terms and conditions_
             MORE üìÑ - _to read the terms and conditions_

             (or Reply MENU üìå _to return to the main menu_)"

  utter_ask_province:
    - buttons:
        - payload: "EASTERN CAPE"
          title: "eastern_cape"
        - payload: "FREE STATE"
          title: "free_state"
        - payload: "GAUTENG"
          title: "gauteng"
        - payload: "KWAZULU NATAL"
          title: "kwazulu_natal"
        - payload: "LIMPOPO"
          title: "limpopo"
        - payload: "MPUMALANGA"
          title: "mpumalanga"
        - payload: "NORTH WEST"
          title: "north_west"
        - payload: "NORTHERN CAPE"
          title: "northern_cape"
        - payload: "WESTERN CAPE"
          title: "western_cape"

      text: "Select your province."

  utter_ask_age:
    - buttons:
        - payload: "<18"
          title: "age_18"
        - payload: "18-39"
          title: "age_18_39"
        - payload: "40-65"
          title: "age_40_65"
        - payload: ">65"
          title: "age_65"

      text: "How old are you?"

  utter_ask_cough:
      - buttons:
          - payload: "YES"
            title: "yes"
          - payload: "NO"
            title: "no"

        text: "Do you have a cough that recently started?"

  utter_ask_sore_throat:
      - buttons:
          - payload: "YES"
            title: "yes"
          - payload: "NO"
            title: "no"

        text: "Do you have a sore throat or pain when swallowing?"

  utter_ask_exposure:
      - buttons:
          - payload: "YES"
            title: "yes"
          - payload: "NO"
            title: "no"
          - payload: "NOT SURE"
            title: "not_sure"

        text: "Have you been in close contact to someone confirmed to be infected with COVID19?"

  utter_ask_tracing:
      - buttons:
          - payload: "YES"
            title: "yes"
          - payload: "NO"
            title: "no"

        text: "Finally, please confirm that the information you shared is *accurate* to the best of your knowledge and that you give the National Department of Health permission to contact you if necessary?"

  utter_submit:
    - text: "All done!"

  utter_slots_values:
    - text: "I am going to save your responses using the following parameters:\n
             - province: {province}\n
             - age: {age}\n
             - cough: {cough}\n
             - exposure: {exposure}\n
             - tracing: {tracing}"

  utter_noworries:
    - text: "you are welcome :)"

  utter_chitchat:
    - text: "chitchat"

  utter_ask_continue:
    - text: "do you want to continue?"

  utter_default:
    - text: "sorry, I didn't understand you, please try input something else"

  utter_iamabot:
    - text: "I am a bot, powered by Rasa."

  utter_ask_like_most:
    - text: "Write brefly about the things that you like most about the new service"

  utter_ask_improve_service:
    - text: "Write brefly about the things that you would like to improve in new service"

  utter_goodbye:
    - text: "Bye"

  utter_greet:
    - text: "Hi! I'm a COVID-19 bot!"

session_config:
  session_expiration_time: 1
  carry_over_slots_to_new_session: true
